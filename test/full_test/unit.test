import inspect, os, commands

# TODO: a better way to get the path to rehtinkdb-unittest
where = os.path.dirname(os.path.abspath(inspect.getfile(inspect.currentframe())))

unit_exec = os.path.join(where, '../../build/debug/rethinkdb-unittest')

list = commands.getoutput(unit_exec + " --gtest_list_tests | grep '\.$'")
list = list.split('\n')
list = [t[:-1] for t in list]

for test in list:
    generate_test(
        "$RETHINKDB/build/debug/rethinkdb-unittest --gtest_filter='%s.*'" % test,
        name = test
        )
